import{b as w,u as y,r as k,j as e,a as l}from"./app-DkDB_8CB.js";import{M as C}from"./main-layout-BtHA0Npo.js";import{L as P}from"./loader-circle-CkAJu07Z.js";import{A as S,S as m,M as z}from"./shopping-bag-DxRCLEcD.js";import{M,T}from"./trash-2-BdFRsBj0.js";import{P as q}from"./plus-Cz8WvdQW.js";import{C as $}from"./clsx--lBOLjvq.js";import"./app-CGfczU0M.js";import"./index-CVeAyMPK.js";import"./x-BURC3Ppq.js";import"./createLucideIcon-a_qB-A08.js";import"./house-BKZxKSjy.js";import"./CartFloatButton-BfPLGnx5.js";import"./shopping-cart-Cxh0H1UY.js";import"./drawer-cart-CdoLFGTu.js";import"./arrow-right-BkUc17Rt.js";function W(){const{cart:u}=w().props,a=Object.values(u),{post:h,processing:d,transform:b}=y({total:0,items:[]}),p=s=>{const t=Number(s.price)||0,r=(s.extras??[]).reduce((c,o)=>c+(Number(o.price)||0),0),n=(s.variations??[]).reduce((c,o)=>c+(Number(o.price)||0),0);return t+r+n};function g(s,t){let r=null;return(...n)=>{r&&clearTimeout(r),r=setTimeout(()=>{s(...n)},t)}}const i=a.reduce((s,t)=>s+p(t)*t.quantity,0),x=(s,t)=>{l.patch(`/cart/${s.key}`,{quantity:t},{preserveScroll:!0})},f=s=>{l.delete(`/cart/${s.key}`,{preserveScroll:!0})},j=k.useCallback(g((s,t)=>{l.patch(`/cart/${s}`,{notes:t},{preserveScroll:!0})},300),[]),N=(s,t)=>{j(s.key,t)},v=()=>{a.length!==0&&(b(s=>({...s,items:a,total:i})),h("/shopping-cart",{preserveScroll:!0}))};return e.jsxs(C,{showFloatShoppingCart:!1,children:[d&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-white/60 backdrop-blur-sm",children:e.jsx(P,{className:"h-10 w-10 animate-spin text-purple-600"})}),e.jsxs("div",{className:"mx-auto max-w-5xl p-3 sm:p-6 lg:p-8",children:[e.jsxs("header",{className:"mb-6 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex h-10 w-10 items-center justify-center rounded-lg border border-purple-100 bg-white text-purple-600 shadow-sm transition-all active:scale-95",children:e.jsx(S,{size:18})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight text-gray-700 uppercase",children:"Mi Carrito"}),e.jsx("p",{className:"text-[10px] font-semibold tracking-widest text-purple-600 uppercase",children:"Confirmación de pedido"})]})]}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-purple-100 bg-purple-50/30 py-20 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-lg bg-white text-gray-300 shadow-sm",children:e.jsx(m,{size:32})}),e.jsx("h2",{className:"text-base font-semibold text-gray-700 uppercase",children:"El carrito está vacío"}),e.jsx("button",{onClick:()=>l.visit("/"),className:"mt-6 rounded-lg bg-purple-600 px-8 py-3 text-sm font-semibold text-white transition-all active:scale-95",children:"VER PRODUCTOS"})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"space-y-3 lg:col-span-2",children:a.map(s=>{const t=p(s);return e.jsxs("div",{className:"group relative rounded-lg border border-purple-100 bg-white p-3 shadow-sm transition-all hover:border-purple-200",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-20 w-20 flex-shrink-0 items-center justify-center rounded-lg bg-purple-50 text-purple-200",children:e.jsx(m,{size:24})}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm leading-tight font-semibold text-purple-800",children:s.name}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-x-2",children:s.variations?.map(r=>e.jsx("span",{className:"text-[10px] font-semibold text-purple-500 uppercase",children:r.name},r.id))})]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["$",(t*s.quantity).toFixed(2)]})]}),s.extras&&s.extras.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.extras.map(r=>e.jsxs("span",{className:"rounded-lg border border-purple-50 bg-purple-50 px-2 py-0.5 text-[9px] font-semibold text-purple-600 uppercase",children:["+"," ",r.name]},r.id))}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 rounded-lg border border-purple-100 bg-purple-50 p-1",children:[e.jsx("button",{onClick:()=>x(s,Math.max(1,s.quantity-1)),className:"flex h-7 w-7 items-center justify-center rounded-lg bg-white text-purple-600 shadow-sm active:scale-90",children:e.jsx(M,{size:14})}),e.jsx("span",{className:"w-8 text-center text-xs font-semibold text-purple-800",children:s.quantity}),e.jsx("button",{onClick:()=>x(s,s.quantity+1),className:"flex h-7 w-7 items-center justify-center rounded-lg bg-white text-purple-600 shadow-sm active:scale-90",children:e.jsx(q,{size:14})})]}),e.jsx("button",{onClick:()=>f(s),className:"text-gray-300 transition-colors hover:text-amber-600",children:e.jsx(T,{size:16})})]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 rounded-lg border border-transparent bg-purple-50/50 px-3 py-2 transition-all focus-within:border-purple-200 focus-within:bg-white",children:[e.jsx(z,{size:14,className:"text-purple-400"}),e.jsx("input",{defaultValue:s.notes??"",onChange:r=>N(s,r.target.value),placeholder:"Instrucciones adicionales...",className:"w-full bg-transparent text-[11px] font-normal text-gray-600 focus:outline-none"})]})]},s.key)})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-20 overflow-hidden rounded-lg border border-purple-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-purple-600 px-6 py-4",children:[e.jsx("span",{className:"text-[10px] leading-tight font-semibold tracking-widest text-purple-200 uppercase",children:"Total Pedido"}),e.jsxs("div",{className:"text-2xl font-semibold text-white",children:["$",i.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"space-y-3 border-b border-purple-50 pb-4",children:[e.jsxs("div",{className:"flex justify-between text-[11px] font-semibold tracking-wider uppercase",children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal"}),e.jsxs("span",{className:"text-gray-700",children:["$",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-[11px] font-semibold tracking-wider uppercase",children:[e.jsx("span",{className:"text-gray-500",children:"Envío"}),e.jsx("span",{className:"text-amber-600 italic",children:"Gratis"})]})]}),e.jsxs("button",{disabled:d,onClick:v,className:"flex w-full items-center justify-between rounded-lg bg-amber-600 p-1.5 pl-5 transition-all hover:bg-amber-700 active:scale-95 disabled:opacity-50",children:[e.jsx("span",{className:"text-xs font-semibold tracking-widest text-white uppercase",children:"Confirmar Orden"}),e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-white/20 text-white",children:e.jsx($,{size:18})})]})]})]})})]})]})]})}export{W as default};
