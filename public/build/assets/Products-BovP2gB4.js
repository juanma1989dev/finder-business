const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-DRnaFo71.js","assets/app-_ZmoGD8T.js","assets/app-CjN5z7Fi.css"])))=>i.map(i=>d[i]);
import{j as e,r as l,_ as q,e as G,a as N}from"./app-DRnaFo71.js";import{c as H,f as V,b as Y}from"./index-CDS2P9IT.js";import{u as C}from"./index-DAOhb2hJ.js";import{R as J,W as K,C as Q,T as U,D as X,a as _,f as E,P as Z,O as ee,b as te}from"./index-DXUyvkal.js";import{c as g,I as re,t as ae}from"./utils-B8V9t6OR.js";import{b as w,B as A}from"./button-oOZJaIDN.js";import{L as oe}from"./loader-circle-DK9NHL9l.js";import{y as se}from"./index-Dgc8qQOq.js";import{m as le}from"./dashboard-layout-B63ifu4J.js";import{LayoutBusinessModules as ie}from"./LayoutBusinessModules-CvCwOIjn.js";import ne from"./ProductServiceModal-D4mS9pys.js";import{P as y}from"./package-PXuZgzM8.js";import{T as ce}from"./trash-2-B_LJmt8F.js";import"./app-_ZmoGD8T.js";import"./index-_ty5M1Kx.js";import"./index-CJG-LqGM.js";import"./clsx-COCWedHH.js";import"./createLucideIcon-8cOpsgex.js";import"./shopping-bag-D6HcC1f4.js";import"./arrow-right-FvoTZcqC.js";import"./circle-alert-DLeoRx40.js";import"./printer-CQ4wc93D.js";import"./house-BvvIOFlQ.js";import"./shield-check-DZxu-W88.js";import"./star-C33ZpR1w.js";import"./package-search-CwpuKR2z.js";import"./plus-D6693a4f.js";import"./shopping-cart-CMRXSugC.js";import"./triangle-alert-BPl7zri6.js";import"./x-BkmaQkV6.js";import"./index-CAsWk8_c.js";import"./index-ByFY5vBa.js";import"./dropdown-menu-DAxWnPxA.js";import"./index-BqgYRoRh.js";import"./index-kNrJbDCw.js";import"./index-BCw_eWvc.js";import"./index-CVASjcgI.js";import"./dialog-AbUjPycv.js";import"./input-JJqCWXCM.js";import"./label-DGwXmTyf.js";import"./select-0gY3wFqx.js";import"./index-BsufrqBI.js";import"./tabs-F0-1njcU.js";import"./textarea-Dd0X32SM.js";var S="AlertDialog",[de]=Y(S,[E]),m=E(),P=t=>{const{__scopeAlertDialog:r,...a}=t,o=m(r);return e.jsx(J,{...o,...a,modal:!0})};P.displayName=S;var pe="AlertDialogTrigger",me=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,s=m(a);return e.jsx(te,{...s,...o,ref:r})});me.displayName=pe;var ue="AlertDialogPortal",T=t=>{const{__scopeAlertDialog:r,...a}=t,o=m(r);return e.jsx(Z,{...o,...a})};T.displayName=ue;var ge="AlertDialogOverlay",R=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,s=m(a);return e.jsx(ee,{...s,...o,ref:r})});R.displayName=ge;var f="AlertDialogContent",[fe,xe]=de(f),he=V("AlertDialogContent"),O=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,children:o,...s}=t,i=m(a),d=l.useRef(null),p=C(r,d),u=l.useRef(null);return e.jsx(K,{contentName:f,titleName:$,docsSlug:"alert-dialog",children:e.jsx(fe,{scope:a,cancelRef:u,children:e.jsxs(Q,{role:"alertdialog",...i,...s,ref:p,onOpenAutoFocus:H(s.onOpenAutoFocus,c=>{c.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(he,{children:o}),e.jsx(be,{contentRef:d})]})})})});O.displayName=f;var $="AlertDialogTitle",k=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,s=m(a);return e.jsx(U,{...s,...o,ref:r})});k.displayName=$;var M="AlertDialogDescription",I=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,s=m(a);return e.jsx(X,{...s,...o,ref:r})});I.displayName=M;var ve="AlertDialogAction",z=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,s=m(a);return e.jsx(_,{...s,...o,ref:r})});z.displayName=ve;var L="AlertDialogCancel",B=l.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...o}=t,{cancelRef:s}=xe(L,a),i=m(a),d=C(r,s);return e.jsx(_,{...i,...o,ref:d})});B.displayName=L;var be=({contentRef:t})=>{const r=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${M}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},Ae=P,je=T,De=R,Ne=O,ye=z,Ce=B,_e=k,Ee=I;function we({...t}){return e.jsx(Ae,{"data-slot":"alert-dialog",...t})}function Se({...t}){return e.jsx(je,{"data-slot":"alert-dialog-portal",...t})}function Pe({className:t,...r}){return e.jsx(De,{"data-slot":"alert-dialog-overlay",className:g("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function Te({className:t,...r}){return e.jsxs(Se,{children:[e.jsx(Pe,{}),e.jsx(Ne,{"data-slot":"alert-dialog-content",className:g("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r})]})}function Re({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:g("flex flex-col gap-2 text-center sm:text-left",t),...r})}function Oe({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:g("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function $e({className:t,...r}){return e.jsx(_e,{"data-slot":"alert-dialog-title",className:g("text-lg font-semibold",t),...r})}function ke({className:t,...r}){return e.jsx(Ee,{"data-slot":"alert-dialog-description",className:g("text-muted-foreground text-sm",t),...r})}function Me({className:t,...r}){return e.jsx(ye,{className:g(w(),t),...r})}function Ie({className:t,...r}){return e.jsx(Ce,{className:g(w({variant:"outline"}),t),...r})}function ze({title:t="¿Estás seguro?",description:r="Esta acción no se puede deshacer.",confirmText:a="Confirmar",cancelText:o="Cancelar",onConfirm:s,onResolve:i}){const[d,p]=l.useState(!0),[u,c]=l.useState(!1),x=()=>{i(!1),p(!1)},v=async()=>{try{c(!0),await s?.(),i(!0)}catch{i(!1)}finally{c(!1),p(!1)}};return G.createPortal(e.jsx(we,{open:d,onOpenChange:p,children:e.jsxs(Te,{children:[e.jsxs(Re,{children:[e.jsx($e,{children:t}),e.jsx(ke,{children:r})]}),e.jsxs(Oe,{children:[e.jsx(Ie,{disabled:u,onClick:x,className:"flex items-center gap-2 border-none bg-gray-50 text-gray-500 hover:bg-gray-100 hover:text-gray-600",children:o}),e.jsxs(Me,{disabled:u,onClick:v,className:"flex items-center gap-2 border-none bg-red-50 text-red-600 shadow-none hover:bg-red-100 hover:text-red-700",children:[u&&e.jsx(oe,{className:"h-4 w-4 animate-spin"}),a]})]})]})}),document.body)}function Le(t){return new Promise(r=>{const a=document.createElement("div");document.body.appendChild(a);const o=()=>{setTimeout(()=>{a.remove()},200)},s=()=>(l.useEffect(()=>o,[]),e.jsx(ze,{...t,onResolve:i=>{r(i),o()}}));q(()=>import("./app-DRnaFo71.js").then(i=>i.c),__vite__mapDeps([0,1,2])).then(i=>{i.createRoot(a).render(e.jsx(s,{}))})})}function Pt({business:t,productsAndServices:r,productTypes:a}){const o=r,[s,i]=l.useState(!1),[d,p]=l.useState(null),u=le({text:`${t.name??""} - Catálogo`,url:"#"}),c=l.useCallback(()=>{N.reload({only:["productsAndServices"]})},[]),x=l.useCallback(()=>{p(null),i(!0)},[]),v=l.useCallback(n=>{p(n),i(!0)},[]),j=l.useCallback(()=>{p(null),i(!1)},[]),F=l.useCallback(async(n,h)=>{if(!n||!h)return;const b=null;await Le({title:"¿Eliminar producto?",description:"Esta acción no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",onConfirm:async()=>{N.delete(`/dashboard/business/${n}-${b}/services/${h}`,{onSuccess:W=>{const D=W.props.flash;D?.success&&(se.success(D.success),c())}})}})},[c]);return e.jsxs(ie,{titleHead:"Catálogo",headerTitle:"Productos y Servicios",headerDescription:`${o.length} artículos registrados`,buttonText:"Nuevo Producto",icon:y,processing:!1,breadcrumbs:u,onSubmit:x,children:[e.jsx("div",{className:"lg:col-span-12",children:o.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6",children:o.map(n=>{const h=typeof n.image_url=="string"&&n.image_url.trim()!=="",b=Number.isFinite(Number(n.price))?Number(n.price).toLocaleString():"0";return e.jsxs("div",{className:"group flex flex-col overflow-hidden rounded-lg border border-purple-200 bg-white shadow-sm transition hover:shadow-md",children:[e.jsxs("div",{className:"relative aspect-square h-55 w-full overflow-hidden bg-purple-50",children:[h?e.jsx("img",{src:n.image_url,alt:n.name||"Producto",className:"h-20 w-full object-cover transition-transform group-hover:scale-105"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-gray-300",children:e.jsx(re,{size:36})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"rounded-lg bg-white/90 px-2 py-1 text-xs font-semibold text-purple-700 shadow-sm backdrop-blur-sm",children:["$",b]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-3",children:[e.jsx("h4",{className:"line-clamp-1 text-sm font-semibold text-purple-800",children:n.name}),e.jsx("p",{className:"mt-1 line-clamp-2 min-h-[32px] text-xs font-normal text-gray-500",children:n.description||"Sin descripción disponible."}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 border-t border-purple-100 pt-3",children:[e.jsx(A,{size:"icon",variant:"ghost","aria-label":"Eliminar producto",className:"h-8 w-8 cursor-pointer rounded-lg text-gray-300 transition-colors hover:bg-red-50 hover:text-red-600 active:scale-95",onClick:()=>F(n.businesses_id,n.id),children:e.jsx(ce,{size:14})}),e.jsxs(A,{size:"sm",className:"h-8 flex-1 cursor-pointer rounded-lg bg-purple-600 text-xs font-semibold text-white transition-all hover:bg-purple-700 active:scale-95",onClick:()=>v(n),children:[e.jsx(ae,{size:14,className:"mr-2"}),"Editar"]})]})]})]},n.id)})}):e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border border-dashed border-gray-200 bg-gray-50/50 py-16 text-center",children:[e.jsx(y,{size:40,className:"mb-3 text-gray-300"}),e.jsx("p",{className:"text-base font-semibold text-gray-700",children:"No hay productos aún"}),e.jsx("p",{className:"mb-4 text-sm text-gray-500",children:"Comienza agregando artículos a tu catálogo."}),e.jsx(A,{onClick:x,variant:"link",className:"text-sm font-semibold text-purple-600 active:scale-95",children:"Crear el primero"})]})}),e.jsx(ne,{open:s,onClose:j,businessId:t.id??"",product:d,onSuccess:()=>{c(),j()},productTypes:a},d?.id??"create")]})}export{Pt as default};
