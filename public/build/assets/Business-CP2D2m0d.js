import{r as m,u as H,j as e,L as C}from"./app-DkDB_8CB.js";import{B as i}from"./button-Bts0IyD1.js";import{D,a as S,b as K,c as E,d as z,e as W}from"./dialog-kdlS7D-j.js";import{D as J,a as Q,b as U,c as b,d as X}from"./dropdown-menu-nHFOzHMs.js";import{I as N}from"./input-C3D08c3E.js";import{L as n}from"./label-BQKXPnzX.js";import{S as I,a as L,b as _,c as F,d as B}from"./select-DyXH3Xg6.js";import{S as Y}from"./switch-B08DHOq7.js";import{l as v}from"./locations-zddfFc1m.js";import{L as Z,y as M}from"./index-CVeAyMPK.js";import{p as ee,E as se,q as T,r as ae,s as te,b as re}from"./utils-CfzZyKvo.js";import{P as w}from"./plus-Cz8WvdQW.js";import{T as O}from"./trash-2-BdFRsBj0.js";import{C as le}from"./clsx--lBOLjvq.js";import{L as $}from"./loader-circle-CkAJu07Z.js";import"./app-CGfczU0M.js";import"./index-tO81QAJn.js";import"./index-BJsFzrv2.js";import"./index-Cybp8v3T.js";import"./index-CNzvj9uQ.js";import"./index-CcpYGMtr.js";import"./x-BURC3Ppq.js";import"./createLucideIcon-a_qB-A08.js";import"./index-EZTf3Dmx.js";import"./index-DfXgjFFH.js";import"./index-iub-ua1H.js";import"./index-C47cWYbP.js";import"./index-C2BrnB1H.js";import"./shopping-bag-DxRCLEcD.js";import"./arrow-right-BkUc17Rt.js";import"./circle-alert-BM5BSp8j.js";import"./printer-DRzafObI.js";import"./package-BU1OvDV9.js";import"./house-BKZxKSjy.js";import"./shield-check-DJA5_I73.js";import"./star-BJgUuVE2.js";import"./package-search-DrzKzZru.js";import"./shopping-cart-Cxh0H1UY.js";import"./triangle-alert-CccrTqft.js";function ie({initialData:c}){const[g,o]=m.useState(!1),[x,d]=m.useState(null),t=H(c);return{open:g,editingId:x,form:t,openForCreate:()=>{t.reset(),t.clearErrors(),d(null),o(!0)},openForEdit:(r,a)=>{t.setData(a),t.clearErrors(),d(r),o(!0)},close:()=>{t.reset(),t.clearErrors(),d(null),o(!1)},setOpen:o}}function Ke({businesses:c,catalogs:g}){const[o,x]=m.useState(null),[d,t]=m.useState(!1),[u,h]=m.useState(null),{open:y,editingId:r,form:a,openForCreate:k,openForEdit:P,close:j}=ie({initialData:{name:"",category_id:"",slogan:"",description:"",phone:"",use_whatsapp:!1,location:""}}),V=s=>{s.preventDefault();const f=r?`/dashboard/business/${r}`:"/dashboard/business",G=r?a.put:a.post;a.transform(l=>{const p=l.location,R=v[p]?.cords??{lat:0,long:0},A=v[p]?.name??"S/D";return{...l,cords:R,address:A}}),G(f,{onSuccess:l=>{const p=l.props;p?.flash?.success&&(M.success(p.flash.success),j())},onError:l=>{l.general&&M.error(l.general)}})},q=()=>{u&&(x(u),a.delete(`/dashboard/business/${u}`,{onFinish:()=>{x(null),t(!1),h(null)}}))};return e.jsxs("div",{className:"min-h-screen bg-purple-50/30",children:[e.jsx("header",{className:"sticky top-0 z-40 w-full border-b border-purple-100 bg-white/90 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto flex h-20 items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-lg bg-purple-600 text-white shadow-md shadow-purple-200",children:e.jsx(ee,{size:22})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-semibold tracking-tight text-gray-700 uppercase",children:"Mis Negocios"}),e.jsxs("div",{className:"flex items-center gap-1.5 leading-none",children:[e.jsx("span",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-amber-500"}),e.jsx("p",{className:"text-[10px] font-semibold tracking-widest text-purple-600 uppercase",children:"Panel de Gestión"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:c.length<10&&e.jsxs(i,{onClick:k,className:"rounded-lg bg-purple-600 px-4 text-[10px] font-semibold tracking-widest text-white uppercase shadow-sm transition-all hover:bg-purple-700 active:scale-95",children:[e.jsx(w,{className:"mr-1.5 h-4 w-4"}),"Nuevo negocio"]})})]})}),e.jsx("main",{className:"container mx-auto px-4 py-6",children:c.length===0?e.jsxs("div",{className:"flex min-h-[400px] flex-col items-center justify-center rounded-lg border-2 border-dashed border-purple-200 bg-white p-12 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-lg bg-purple-50",children:e.jsx(w,{className:"h-8 w-8 text-purple-600"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-700 uppercase",children:"Empieza tu aventura"}),e.jsx("p",{className:"mt-1 text-[10px] font-normal tracking-widest text-gray-500 uppercase",children:"Crea tu primera sucursal para que todos te vean."}),e.jsx(i,{onClick:k,className:"mt-6 rounded-lg bg-purple-600 px-8 text-xs font-semibold text-white uppercase hover:bg-purple-700 active:scale-95",children:"Crear ahora"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:c.map(s=>e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-purple-100 bg-white shadow-sm transition-all duration-300 hover:border-purple-300 hover:shadow-md",children:[e.jsxs("div",{className:"relative aspect-[16/9] overflow-hidden bg-purple-50",children:[e.jsx("img",{src:s.cover_image?`/storage/${s.cover_image}`:`/images/${s.category.image}`,alt:s.name,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"rounded-lg bg-white/90 px-2 py-0.5 text-[9px] font-semibold tracking-widest text-purple-700 uppercase shadow-sm backdrop-blur-sm",children:s.category.name})}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-white/90 text-gray-600 shadow-sm hover:text-purple-600 active:scale-90",children:e.jsx(se,{size:14})})}),e.jsxs(U,{align:"end",className:"w-40 rounded-lg border-purple-100",children:[e.jsxs(b,{className:"text-[10px] font-semibold uppercase",onClick:()=>P(s.id,s),children:[e.jsx(T,{className:"mr-2 h-3.5 w-3.5 text-purple-600"}),"Editar"]}),e.jsx(b,{className:"text-[10px] font-semibold uppercase",asChild:!0,children:e.jsxs(C,{href:`/business/detail/${s.id}`,target:"_blank",children:[e.jsx(ae,{className:"mr-2 h-3.5 w-3.5 text-amber-500"}),"Ver sitio"]})}),e.jsx(X,{className:"bg-purple-50"}),e.jsxs(b,{className:"text-[10px] font-semibold text-red-600 uppercase",onClick:()=>{h(s.id),t(!0)},children:[e.jsx(O,{className:"mr-2 h-3.5 w-3.5"}),"Eliminar"]})]})]})})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[e.jsx("h3",{className:"line-clamp-1 text-sm font-semibold text-purple-900 group-hover:text-purple-600",children:s.name}),e.jsx("p",{className:"mt-1 line-clamp-1 text-[10px] leading-tight font-normal tracking-wide text-gray-500 uppercase",children:s.slogan}),e.jsxs("div",{className:"mt-4 flex items-center gap-1.5 border-t border-purple-50 pt-3",children:[e.jsx(te,{size:12,className:"text-purple-400"}),e.jsx("span",{className:"truncate text-[10px] font-medium tracking-tighter text-gray-400 uppercase",children:s.address})]}),e.jsx(i,{asChild:!0,variant:"ghost",className:"mt-4 h-9 w-full justify-between rounded-lg bg-purple-50 px-3 text-[10px] font-semibold tracking-widest text-purple-700 uppercase transition-all hover:bg-purple-600 hover:text-white",children:e.jsxs(C,{href:`/dashboard/business/${s.id}-${s.slug}/home`,children:["Gestionar negocio",e.jsx(le,{size:14,className:"opacity-50"})]})})]}),o===s.id&&e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/60 backdrop-blur-sm",children:e.jsx($,{className:"h-6 w-6 animate-spin text-purple-600"})})]},s.id))})})}),e.jsx(D,{open:y,onOpenChange:s=>!s&&j(),children:e.jsxs(S,{className:"max-w-2xl overflow-hidden rounded-lg border-none p-0 shadow-2xl",children:[e.jsx("div",{className:"h-0.5 w-full bg-purple-600"}),e.jsx(K,{className:"px-4 pt-6 text-left",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-purple-600 text-white shadow-lg",children:r?e.jsx(T,{size:16}):e.jsx(w,{size:16})}),e.jsxs("div",{children:[e.jsx(E,{className:"text-lg font-semibold tracking-tight text-gray-800 uppercase",children:r?"Editar Negocio":"Nuevo Negocio"}),e.jsx(z,{className:"text-[10px] font-normal tracking-widest text-gray-500 uppercase",children:"Información de sucursal"})]})]})}),e.jsxs("form",{onSubmit:V,className:"grid grid-cols-1 gap-3 p-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsx(n,{className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Nombre"}),e.jsx(N,{className:"rounded-lg border-purple-100 bg-purple-50/30 text-sm focus:border-purple-600 focus:ring-1 focus:ring-purple-600",value:a.data.name,onChange:s=>a.setData("name",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Categoría"}),e.jsxs(I,{value:a.data.category_id,onValueChange:s=>a.setData("category_id",s),children:[e.jsx(L,{className:"rounded-lg border-purple-100 bg-purple-50/30 text-xs",children:e.jsx(_,{placeholder:"Selecciona"})}),e.jsx(F,{className:"rounded-lg border-purple-100",children:g?.categories.map(s=>e.jsx(B,{value:s.id.toString(),className:"text-xs",children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Ciudad"}),e.jsxs(I,{value:a.data.location,onValueChange:s=>a.setData("location",s),children:[e.jsx(L,{className:"rounded-lg border-purple-100 bg-purple-50/30 text-xs",children:e.jsx(_,{placeholder:"Selecciona"})}),e.jsx(F,{className:"rounded-lg border-purple-100",children:Object.entries(v).map(([s,f])=>e.jsx(B,{value:s,className:"text-xs",children:f.name},s))})]})]}),e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsx(n,{className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Eslogan"}),e.jsx(N,{className:"rounded-lg border-purple-100 bg-purple-50/30 text-sm focus:border-purple-600",value:a.data.slogan,onChange:s=>a.setData("slogan",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Teléfono"}),e.jsx(N,{type:"tel",className:"rounded-lg border-purple-100 bg-purple-50/30 text-sm",value:a.data.phone,onChange:s=>a.setData("phone",s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-purple-100 bg-purple-50/50 p-2",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-[10px] font-semibold text-purple-900 uppercase",children:"WhatsApp"}),e.jsx("p",{className:"text-[10px] font-semibold tracking-tighter text-amber-600 uppercase",children:"Canal directo"})]}),e.jsx(Y,{checked:a.data.use_whatsapp,onCheckedChange:s=>a.setData("use_whatsapp",s),className:"data-[state=checked]:bg-purple-600"})]}),e.jsxs(W,{className:"mt-4 gap-2 sm:col-span-2",children:[e.jsx(i,{type:"button",variant:"ghost",onClick:j,className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",children:"Cancelar"}),e.jsxs(i,{disabled:a.processing,className:"rounded-lg bg-purple-600 px-8 text-[10px] font-semibold tracking-widest text-white uppercase hover:bg-purple-700 active:scale-95",children:[a.processing?e.jsx($,{className:"h-4 w-4 animate-spin"}):e.jsx(re,{className:"mr-2 h-4 w-4"}),"Guardar Datos"]})]})]})]})}),e.jsx(D,{open:d,onOpenChange:t,children:e.jsxs(S,{className:"max-w-sm rounded-lg border-none p-6 text-center shadow-2xl",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-lg bg-amber-50 text-amber-600",children:e.jsx(O,{size:28})}),e.jsx(E,{className:"text-base font-semibold tracking-tight text-gray-800 uppercase",children:"¿Estás seguro?"}),e.jsx(z,{className:"text-[10px] leading-tight font-normal tracking-widest text-gray-500 uppercase",children:"Esta acción borrará permanentemente el negocio."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-2",children:[e.jsx(i,{variant:"destructive",className:"rounded-lg py-6 text-xs font-semibold tracking-widest uppercase active:scale-95",onClick:q,children:"Sí, eliminar negocio"}),e.jsx(i,{variant:"ghost",className:"text-[10px] font-semibold tracking-widest text-gray-400 uppercase",onClick:()=>t(!1),children:"Mantenerlo"})]})]})}),e.jsx(Z,{position:"bottom-right",hideProgressBar:!0,theme:"light"})]})}export{Ke as default};
