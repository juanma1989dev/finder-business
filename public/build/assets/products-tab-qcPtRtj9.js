import{e as p,r as u,j as e,d as h}from"./vendor-core-exSyXSqW.js";import{T as g}from"./index-BU_B9Ap-.js";import{ProductConfigModal as f}from"./ProductConfigModal-C4juP4t4.js";import{s as n,P as j}from"./vendor-icons-C0rekE6d.js";const y=({business:i})=>{const{auth:o,cart:c}=p().props,d=o.user,[r,l]=u.useState(null),m=s=>Object.values(c).filter(t=>t.id===s).reduce((t,a)=>t+a.quantity,0),x=(s,t)=>{const a={id:s.id,businesses_id:s.businesses_id,name:s.name,price:s.price,extras:t.extras,variations:t.variations,notes:t.notes,quantity:1};h.post("/cart",a,{preserveScroll:!0})};return e.jsxs("div",{className:"w-full py-0",children:[e.jsx("section",{className:"mb-4",children:i.products?.length?e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:i.products.map(s=>{const t=m(s.id);return e.jsxs("div",{className:"group flex flex-row overflow-hidden rounded-lg border border-purple-200 bg-white shadow-sm transition-all duration-300 sm:flex-col",children:[e.jsxs("div",{className:"relative h-28 w-28 shrink-0 overflow-hidden bg-purple-50 sm:h-48 sm:w-full",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(n,{className:"h-8 w-8 text-gray-300"})}),t>0&&e.jsx("div",{className:"absolute top-2 right-2 flex h-6 min-w-[24px] animate-pulse items-center justify-center rounded-lg bg-purple-600 px-2 text-[10px] font-semibold text-white shadow-lg sm:top-4 sm:right-4",children:t})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-3",children:[e.jsxs("div",{className:"flex-1 space-y-1 sm:space-y-2",children:[e.jsx("h3",{className:"text-sm leading-tight font-semibold text-purple-800",children:s.name}),e.jsx("p",{className:"line-clamp-2 text-[10px] leading-tight font-normal text-gray-600",children:s.description||"Sin descripciÃ³n"})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-2 sm:mt-3 sm:flex-row sm:items-center sm:justify-between sm:border-t sm:border-purple-50 sm:pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-1 sm:flex-col sm:items-start",children:[e.jsx("span",{className:"text-[10px] font-semibold text-gray-500 uppercase",children:"Precio"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["$",s.price]})]}),d?.type===g.CLIENT&&e.jsxs("button",{onClick:()=>l(s),className:"flex items-center justify-center gap-1 rounded-lg bg-purple-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm transition-transform active:scale-95",children:[e.jsx(j,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:t===0?"Agregar":"Otro"})]})]})]})]},s.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-purple-200 bg-purple-50 py-20 text-center",children:[e.jsx("div",{className:"mb-4 rounded-lg bg-white p-3 text-gray-300 shadow-sm",children:e.jsx(n,{size:40})}),e.jsx("h3",{className:"text-base font-semibold text-gray-700",children:"Sin productos registrados"}),e.jsx("p",{className:"mt-1 text-[10px] leading-tight font-normal tracking-wider text-gray-500 uppercase",children:"Vuelve pronto para ver novedades"})]})}),r&&e.jsx(f,{product:r,onClose:()=>l(null),onConfirm:s=>{x(r,s),l(null)}})]})};export{y as ProductsBussinessTab};
