import{j as e,u as G,r as u}from"./vendor-core-VmliHTPN.js";import{B as O}from"./badge-CFe_h6Ok.js";import{B as $}from"./button-WPYQNUen.js";import{C as k}from"./card-CeDo2TIP.js";import{B as P,E as R}from"./vendor-ui-g7ZgVefF.js";import{c as H}from"./utils-CFGx6IcU.js";import{h as K,e as M,f as X,ab as U,X as W,R as q}from"./vendor-icons-1nBL8bh1.js";import{I as m}from"./input-Y5Kcus0G.js";import{L as o}from"./label-DeEdRV3C.js";import{S as w}from"./switch-ZJBonZNv.js";function C({className:x,...c}){return e.jsx(P,{"data-slot":"checkbox",className:H("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",x),...c,children:e.jsx(R,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(K,{className:"size-3.5"})})})}const J={id:void 0,name:"",phone:"",use_whatsapp:!0,description:"",long_description:"",id_category:"",address:"",tags:"",amenities:[],payments:[],schedules:[]},_=6,Q=4;function de({categories:x,initialValues:c,submitUrl:T,onSuccess:b,payments:S,services:A}){const{data:t,setData:l,transform:L,put:B,processing:d,errors:n,wasSuccessful:j}=G({...J,...c,amenities:c?.amenities?.map(s=>s.id)??[],payments:c?.payments?.map(s=>s.id)??[],schedules:c?.schedules?.map(s=>s)??[]}),[h,f]=u.useState(""),[i,N]=u.useState([...c.tags??[]]),E=s=>{s.preventDefault(),L(a=>({...a,tags:i.join(",")})),B(T)},D=(s,a)=>{a?l("amenities",[...t.amenities,s]):l("amenities",t.amenities.filter(r=>r!==s))},I=(s,a)=>{a?l("payments",[...t.payments,s]):l("payments",t.payments.filter(r=>r!==s))};u.useEffect(()=>{j&&b&&b()},[j]);const z=s=>{s.key==="Enter"&&(s.preventDefault(),v())},v=()=>{const s=h.trim().toLowerCase();y(s,i)&&(N([...i,s]),f(""))},p=(s,a,r)=>{const g=[...t.schedules];g[s]={...g[s],[a]:r},l("schedules",g)},F=s=>{N(a=>a.filter(r=>r!==s))},y=(s,a)=>{const r=s.trim().toLowerCase();return r.length>=Q&&!a.includes(r)&&a.length<_};return e.jsxs("form",{className:"relative flex w-full flex-col gap-2 rounded-xl p-1 p-3 lg:w-12/12 xl:flex-row",onSubmit:E,children:[e.jsx("button",{type:"submit",disabled:d,className:"absolute top-0 right-2 mt-6 flex cursor-pointer items-center justify-center gap-2 rounded-lg bg-orange-600 p-2 text-white shadow hover:scale-105 hover:bg-orange-700 disabled:opacity-50",title:"Guardar",children:d?e.jsx(M,{className:"h-4 w-4 animate-spin duration-400"}):e.jsx(X,{className:"h-5 w-5"})}),e.jsxs(k,{className:"flex w-full flex-col gap-2 p-3 xl:w-6/12",children:[e.jsxs("h3",{className:"mt-2 mb-4 mb-5 flex items-center gap-3 text-lg font-bold",children:["Datos generales",e.jsx(U,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"my-3 md:col-span-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"text",value:t.name,onChange:s=>l("name",s.target.value),className:"mt-1 block w-full rounded-xl border border-gray-200 p-2",placeholder:"Ingresa el nombre",disabled:d}),n.name&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:n.name})]}),e.jsxs("div",{className:"my-3 md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Descripción ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.description,onChange:s=>l("description",s.target.value),className:"mt-1 block w-full rounded-xl border border-gray-200 p-2",maxLength:100,disabled:d}),n.description&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:n.description}),e.jsxs("span",{className:"text-sm font-bold text-gray-700/60",children:["Caracteres restantes -"," ",100-t.description.length]})]}),e.jsxs("div",{className:"my-3 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Descripción larga"}),e.jsx("textarea",{value:t.long_description,onChange:s=>l("long_description",s.target.value),className:"mt-1 block w-full rounded-xl border border-gray-200 p-2",rows:8,maxLength:1e3,disabled:d}),n.description&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:n.long_description}),e.jsxs("span",{className:"text-sm font-bold text-gray-700/60",children:["Caracteres restantes -"," ",1e3-t.long_description.length]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Categoría ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.id_category,onChange:s=>l("id_category",s.target.value),className:"mt-1 block w-full rounded-xl border border-gray-200 p-2",disabled:d,children:[e.jsx("option",{value:"",children:"Selecciona una categoría"}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),n.id_category&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:n.id_category})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Teléfono",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"tel",value:t.phone,onChange:s=>l("phone",s.target.value.replace(/\D/g,"")),className:"my-1 block w-full rounded-xl border border-gray-200 p-2",placeholder:"1234567890",maxLength:10,disabled:d}),e.jsxs(o,{className:"flex items-center gap-3 text-sm",children:["¿Usar para WhatsApp?",e.jsx(w,{checked:t.use_whatsapp,onCheckedChange:s=>{l("use_whatsapp",s)},className:"border-gray-300 data-[state=checked]:bg-emerald-500",disabled:d})]}),n.phone&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:n.phone})]})]}),e.jsxs("div",{className:"mt-3 border-t pt-5",children:[e.jsxs("h3",{className:"mt-3 mb-0 text-lg font-semibold",children:["Palabras claves -"," ",e.jsxs("span",{className:"text-sm text-gray-500",children:[" ","(",i.length,")"," "]})]}),e.jsx("span",{className:"mb-5 text-sm text-gray-500",children:"(Deben ser mínimo 4 caracteres)"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{id:"tags",value:h,onChange:s=>f(s.target.value),onKeyDown:z,placeholder:"pizza, tlayudas, hamburguesas, ...",disabled:i.length>=_}),e.jsx($,{type:"button",onClick:v,variant:"outline",disabled:!y(h,i),children:"Agregar"})]})}),e.jsx("div",{className:"my-3 flex gap-1",children:i.map(function(s){return e.jsxs(O,{className:"flex items-center gap-1 bg-orange-600/80 px-2 py-1 text-sm",children:[e.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),F(s)},className:"ml-1 cursor-pointer rounded-full p-0.5 hover:bg-black/20",children:e.jsx(W,{className:"h-4 w-4 text-white"})}),s]},`tag-${s}`)})})]}),e.jsxs("div",{className:"my-5 space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Amenidades"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:A.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:`service-${s.id}`,checked:t.amenities.includes(s.id),onCheckedChange:a=>D(s.id,a===!0),disabled:d,className:"data-[state=checked]:border-emerald-500 data-[state=checked]:bg-emerald-500"}),e.jsx(o,{htmlFor:`service-${s.id}`,className:"cursor-pointer font-normal",children:s.name})]},s.id))})]}),e.jsxs("div",{className:"my-5 space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tipos de pago"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:S.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:s.id,checked:t.payments.includes(s.id),onCheckedChange:a=>I(s.id,a===!0),className:"data-[state=checked]:border-emerald-500 data-[state=checked]:bg-emerald-500"}),e.jsx(o,{htmlFor:s.id,className:"cursor-pointer font-normal",children:s.name})]},s.id))})]})]}),e.jsxs(k,{className:"w-full p-3 xl:w-6/12",children:[e.jsxs("h3",{className:"mt-2 mb-4 flex items-center gap-3 text-lg font-bold",children:["Horarios",e.jsx(q,{className:"h-4 w-4"})]}),e.jsx("div",{className:"space-y-4",children:t.schedules.map((s,a)=>e.jsxs("div",{className:"space-y-2 rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-md font-semibold",children:s.label}),e.jsxs(o,{className:"text-md flex cursor-pointer gap-2 font-semibold",children:[e.jsx("span",{children:s.isOpen?"Abierto":"Cerrado"}),e.jsx(w,{checked:s.isOpen,onCheckedChange:r=>{p(a,"isOpen",r)},className:"cursor-pointer data-[state=checked]:bg-emerald-500"})]})]}),s.isOpen&&e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(o,{className:"text-sm",children:"Apertura"}),e.jsx(m,{type:"time",value:s.open,onChange:r=>p(a,"open",r.target.value)})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(o,{className:"text-sm",children:"Cierre"}),e.jsx(m,{type:"time",value:s.close,onChange:r=>p(a,"close",r.target.value)})]})]})]},a))})]})]})}export{de as default};
