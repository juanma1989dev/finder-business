var oe={};const Be=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},tt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=e[n++],s=e[n++],o=e[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return t.join("")},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const a=e[i],s=i+1<e.length,o=s?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,m=a>>2,g=(a&3)<<4|o>>4;let h=(o&15)<<2|c>>6,k=c&63;l||(k=64,s||(h=64)),r.push(n[m],n[g],n[h],n[k])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Be(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const g=i<e.length?n[e.charAt(i)]:64;if(++i,a==null||o==null||c==null||g==null)throw new nt;const h=a<<2|o>>4;if(r.push(h),c!==64){const k=o<<4&240|c>>2;if(r.push(k),g!==64){const et=c<<6&192|g;r.push(et)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rt=function(e){const t=Be(e);return Re.encodeByteArray(t,!0)},Ne=function(e){return rt(e).replace(/\./g,"")},it=function(e){try{return Re.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function at(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const st=()=>at().__FIREBASE_DEFAULTS__,ot=()=>{if(typeof process>"u"||typeof oe>"u")return;const e=oe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ct=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&it(e[1]);return t&&JSON.parse(t)},lt=()=>{try{return st()||ot()||ct()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},$e=()=>lt()?.config;class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Pe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $(){try{return typeof indexedDB=="object"}catch{return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ft="FirebaseError";class T extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ft,Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,a=this.errors[t],s=a?ut(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new T(i,o,r)}}function ut(e,t){return e.replace(ht,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const ht=/\{\$([^}]+)}/g;function B(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const a=e[i],s=t[i];if(ce(a)&&ce(s)){if(!B(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ce(e){return e!==null&&typeof e=="object"}const pt=1e3,gt=2,mt=14400*1e3,bt=.5;function le(e,t=pt,n=gt){const r=t*Math.pow(n,e),i=Math.round(bt*r*(Math.random()-.5)*2);return Math.min(mt,r+i)}function D(e){return e&&e._delegate?e._delegate:e}class E{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const _="[DEFAULT]";class yt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new dt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(It(t))try{this.getOrInitializeService({instanceIdentifier:_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_){return this.instances.has(t)}getOptions(t=_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=_){return this.component?this.component.multipleInstances?t:_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wt(e){return e===_?void 0:e}function It(e){return e.instantiationMode==="EAGER"}class Et{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var d;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(d||(d={}));const _t={debug:d.DEBUG,verbose:d.VERBOSE,info:d.INFO,warn:d.WARN,error:d.ERROR,silent:d.SILENT},vt=d.INFO,St={[d.DEBUG]:"log",[d.VERBOSE]:"log",[d.INFO]:"info",[d.WARN]:"warn",[d.ERROR]:"error"},At=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=St[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Le{constructor(t){this.name=t,this._logLevel=vt,this._logHandler=At,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in d))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,d.DEBUG,...t),this._logHandler(this,d.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,d.VERBOSE,...t),this._logHandler(this,d.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,d.INFO,...t),this._logHandler(this,d.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,d.WARN,...t),this._logHandler(this,d.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,d.ERROR,...t),this._logHandler(this,d.ERROR,...t)}}const Tt=(e,t)=>t.some(n=>e instanceof n);let de,fe;function Dt(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ct(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fe=new WeakMap,G=new WeakMap,xe=new WeakMap,F=new WeakMap,Z=new WeakMap;function Mt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{n(y(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",a),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Fe.set(n,e)}).catch(()=>{}),Z.set(t,e),t}function Ot(e){if(G.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)});G.set(e,t)}let q={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return G.get(e);if(t==="objectStoreNames")return e.objectStoreNames||xe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function kt(e){q=e(q)}function Bt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(x(this),t,...n);return xe.set(r,t.sort?t.sort():[t]),y(r)}:Ct().includes(e)?function(...t){return e.apply(x(this),t),y(Fe.get(this))}:function(...t){return y(e.apply(x(this),t))}}function Rt(e){return typeof e=="function"?Bt(e):(e instanceof IDBTransaction&&Ot(e),Tt(e,Dt())?new Proxy(e,q):e)}function y(e){if(e instanceof IDBRequest)return Mt(e);if(F.has(e))return F.get(e);const t=Rt(e);return t!==e&&(F.set(e,t),Z.set(t,e)),t}const x=e=>Z.get(e);function ee(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(e,t),o=y(s);return r&&s.addEventListener("upgradeneeded",l=>{r(y(s.result),l.oldVersion,l.newVersion,y(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}function H(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",r=>t(r.oldVersion,r)),y(n).then(()=>{})}const Nt=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],j=new Map;function ue(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(j.get(t))return j.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=$t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nt.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return j.set(t,a),a}kt(e=>({...e,get:(t,n,r)=>ue(t,n)||e.get(t,n,r),has:(t,n)=>!!ue(t,n)||e.has(t,n)}));class Pt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lt(e){return e.getComponent()?.type==="VERSION"}const Y="@firebase/app",he="0.14.8";const w=new Le("@firebase/app"),Ft="@firebase/app-compat",xt="@firebase/analytics-compat",Ht="@firebase/analytics",jt="@firebase/app-check-compat",Ut="@firebase/app-check",Vt="@firebase/auth",Kt="@firebase/auth-compat",Wt="@firebase/database",zt="@firebase/data-connect",Gt="@firebase/database-compat",qt="@firebase/functions",Yt="@firebase/functions-compat",Jt="@firebase/installations",Xt="@firebase/installations-compat",Qt="@firebase/messaging",Zt="@firebase/messaging-compat",en="@firebase/performance",tn="@firebase/performance-compat",nn="@firebase/remote-config",rn="@firebase/remote-config-compat",an="@firebase/storage",sn="@firebase/storage-compat",on="@firebase/firestore",cn="@firebase/ai",ln="@firebase/firestore-compat",dn="firebase";const J="[DEFAULT]",fn={[Y]:"fire-core",[Ft]:"fire-core-compat",[Ht]:"fire-analytics",[xt]:"fire-analytics-compat",[Ut]:"fire-app-check",[jt]:"fire-app-check-compat",[Vt]:"fire-auth",[Kt]:"fire-auth-compat",[Wt]:"fire-rtdb",[zt]:"fire-data-connect",[Gt]:"fire-rtdb-compat",[qt]:"fire-fn",[Yt]:"fire-fn-compat",[Jt]:"fire-iid",[Xt]:"fire-iid-compat",[Qt]:"fire-fcm",[Zt]:"fire-fcm-compat",[en]:"fire-perf",[tn]:"fire-perf-compat",[nn]:"fire-rc",[rn]:"fire-rc-compat",[an]:"fire-gcs",[sn]:"fire-gcs-compat",[on]:"fire-fst",[ln]:"fire-fst-compat",[cn]:"fire-vertex","fire-js":"fire-js",[dn]:"fire-js-all"};const R=new Map,un=new Map,X=new Map;function pe(e,t){try{e.container.addComponent(t)}catch(n){w.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function S(e){const t=e.name;if(X.has(t))return w.debug(`There were multiple attempts to register component ${t}.`),!1;X.set(t,e);for(const n of R.values())pe(n,e);for(const n of un.values())pe(n,e);return!0}function te(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const hn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},I=new L("app","Firebase",hn);class pn{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new E("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw I.create("app-deleted",{appName:this._name})}}function He(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:J,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw I.create("bad-app-name",{appName:String(i)});if(n||(n=$e()),!n)throw I.create("no-options");const a=R.get(i);if(a){if(B(n,a.options)&&B(r,a.config))return a;throw I.create("duplicate-app",{appName:i})}const s=new Et(i);for(const l of X.values())s.addComponent(l);const o=new pn(n,r,s);return R.set(i,o),o}function je(e=J){const t=R.get(e);if(!t&&e===J&&$e())return He();if(!t)throw I.create("no-app",{appName:e});return t}function v(e,t,n){let r=fn[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),w.warn(s.join(" "));return}S(new E(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const gn="firebase-heartbeat-database",mn=1,C="firebase-heartbeat-store";let U=null;function Ue(){return U||(U=ee(gn,mn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(C)}catch(n){console.warn(n)}}}}).catch(e=>{throw I.create("idb-open",{originalErrorMessage:e.message})})),U}async function bn(e){try{const n=(await Ue()).transaction(C),r=await n.objectStore(C).get(Ve(e));return await n.done,r}catch(t){if(t instanceof T)w.warn(t.message);else{const n=I.create("idb-get",{originalErrorMessage:t?.message});w.warn(n.message)}}}async function ge(e,t){try{const r=(await Ue()).transaction(C,"readwrite");await r.objectStore(C).put(t,Ve(e)),await r.done}catch(n){if(n instanceof T)w.warn(n.message);else{const r=I.create("idb-set",{originalErrorMessage:n?.message});w.warn(r.message)}}}function Ve(e){return`${e.name}!${e.options.appId}`}const yn=1024,wn=30;class In{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _n(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=me();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>wn){const i=vn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){w.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=me(),{heartbeatsToSend:n,unsentEntries:r}=En(this._heartbeatsCache.heartbeats),i=Ne(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return w.warn(t),""}}}function me(){return new Date().toISOString().substring(0,10)}function En(e,t=yn){const n=[];let r=e.slice();for(const i of e){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),be(n)>t){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),be(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _n{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $()?P().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bn(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ge(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ge(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function be(e){return Ne(JSON.stringify({version:2,heartbeats:e})).length}function vn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Sn(e){S(new E("platform-logger",t=>new Pt(t),"PRIVATE")),S(new E("heartbeat",t=>new In(t),"PRIVATE")),v(Y,he,e),v(Y,he,"esm2020"),v("fire-js","")}Sn("");const N="analytics",An="firebase_id",Tn="origin",Dn=60*1e3,Cn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ne="https://www.googletagmanager.com/gtag/js";const u=new Le("@firebase/analytics");const Mn={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},p=new L("analytics","Analytics",Mn);function On(e){if(!e.startsWith(ne)){const t=p.create("invalid-gtag-resource",{gtagURL:e});return u.warn(t.message),""}return e}function Ke(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function kn(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Bn(e,t){const n=kn("firebase-js-sdk-policy",{createScriptURL:On}),r=document.createElement("script"),i=`${ne}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Rn(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Nn(e,t,n,r,i,a){const s=r[i];try{if(s)await t[s];else{const l=(await Ke(n)).find(c=>c.measurementId===i);l&&await t[l.appId]}}catch(o){u.error(o)}e("config",i,a)}async function $n(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const o=await Ke(n);for(const l of s){const c=o.find(g=>g.measurementId===l),m=c&&t[c.appId];if(m)a.push(m);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e("event",r,i||{})}catch(a){u.error(a)}}function Pn(e,t,n,r){async function i(a,...s){try{if(a==="event"){const[o,l]=s;await $n(e,t,n,o,l)}else if(a==="config"){const[o,l]=s;await Nn(e,t,n,r,o,l)}else if(a==="consent"){const[o,l]=s;e("consent",o,l)}else if(a==="get"){const[o,l,c]=s;e("get",o,l,c)}else if(a==="set"){const[o]=s;e("set",o)}else e(a,...s)}catch(o){u.error(o)}}return i}function Ln(e,t,n,r,i){let a=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=Pn(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function Fn(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ne)&&n.src.includes(e))return n;return null}const xn=30,Hn=1e3;class jn{constructor(t={},n=Hn){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const We=new jn;function Un(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Vn(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:Un(n)},i=Cn.replace("{app-id}",t),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let s="";try{const o=await a.json();o.error?.message&&(s=o.error.message)}catch{}throw p.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s})}return a.json()}async function Kn(e,t=We,n){const{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw p.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw p.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Gn;return setTimeout(async()=>{o.abort()},Dn),ze({appId:r,apiKey:i,measurementId:a},s,o,t)}async function ze(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=We){const{appId:a,measurementId:s}=e;try{await Wn(r,t)}catch(o){if(s)return u.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${o?.message}]`),{appId:a,measurementId:s};throw o}try{const o=await Vn(e);return i.deleteThrottleMetadata(a),o}catch(o){const l=o;if(!zn(l)){if(i.deleteThrottleMetadata(a),s)return u.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:a,measurementId:s};throw o}const c=Number(l?.customData?.httpStatus)===503?le(n,i.intervalMillis,xn):le(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,m),u.debug(`Calling attemptFetch again in ${c} millis`),ze(e,m,r,i)}}function Wn(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(p.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function zn(e){if(!(e instanceof T)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Gn{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function qn(e,t,n,r,i){if(i&&i.global){e("event",n,r);return}else{const a=await t,s={...r,send_to:a};e("event",n,s)}}async function Yn(e,t,n,r){if(r&&r.global){const i={};for(const a of Object.keys(n))i[`user_properties.${a}`]=n[a];return e("set",i),Promise.resolve()}else{const i=await t;e("config",i,{update:!0,user_properties:n})}}async function Jn(){if($())try{await P()}catch(e){return u.warn(p.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return u.warn(p.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Xn(e,t,n,r,i,a,s){const o=Kn(e);o.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&u.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>u.error(h)),t.push(o);const l=Jn().then(h=>{if(h)return r.getId()}),[c,m]=await Promise.all([o,l]);Fn(a)||Bn(a,c.measurementId),i("js",new Date);const g=s?.config??{};return g[Tn]="firebase",g.update=!0,m!=null&&(g[An]=m),i("config",c.measurementId,g),c.measurementId}class Qn{constructor(t){this.app=t}_delete(){return delete A[this.app.options.appId],Promise.resolve()}}let A={},ye=[];const we={};let V="dataLayer",Zn="gtag",Ie,re,Ee=!1;function er(){const e=[];if(Pe()&&e.push("This is a browser extension environment."),Q()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=p.create("invalid-analytics-context",{errorInfo:t});u.warn(n.message)}}function tr(e,t,n){er();const r=e.options.appId;if(!r)throw p.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)u.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw p.create("no-api-key");if(A[r]!=null)throw p.create("already-exists",{id:r});if(!Ee){Rn(V);const{wrappedGtag:a,gtagCore:s}=Ln(A,ye,we,V,Zn);re=a,Ie=s,Ee=!0}return A[r]=Xn(e,ye,we,t,Ie,V,n),new Qn(e)}function nr(e=je()){e=D(e);const t=te(e,N);return t.isInitialized()?t.getImmediate():rr(e)}function rr(e,t={}){const n=te(e,N);if(n.isInitialized()){const i=n.getImmediate();if(B(t,n.getOptions()))return i;throw p.create("already-initialized")}return n.initialize({options:t})}async function ir(){if(Pe()||!Q()||!$())return!1;try{return await P()}catch{return!1}}function ar(e,t,n){e=D(e),Yn(re,A[e.app.options.appId],t,n).catch(r=>u.error(r))}function sr(e,t,n,r){e=D(e),qn(re,A[e.app.options.appId],t,n,r).catch(i=>u.error(i))}const _e="@firebase/analytics",ve="0.10.19";function or(){S(new E(N,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return tr(r,i,n)},"PUBLIC")),S(new E("analytics-internal",e,"PRIVATE")),v(_e,ve),v(_e,ve,"esm2020");function e(t){try{const n=t.getProvider(N).getImmediate();return{logEvent:(r,i,a)=>sr(n,r,i,a),setUserProperties:(r,i)=>ar(n,r,i)}}catch(n){throw p.create("interop-component-reg-failed",{reason:n})}}}or();const cr="/firebase-messaging-sw.js",lr="/firebase-cloud-messaging-push-scope",Ge="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dr="https://fcmregistrations.googleapis.com/v1",qe="google.c.a.c_id",fr="google.c.a.c_l",ur="google.c.a.ts",hr="google.c.a.e",Se=1e4;var Ae;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Ae||(Ae={}));var M;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(M||(M={}));function b(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pr(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const K="fcm_token_details_db",gr=5,Te="fcm_token_object_Store";async function mr(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(K))return null;let t=null;return(await ee(K,gr,{upgrade:async(r,i,a,s)=>{if(i<2||!r.objectStoreNames.contains(Te))return;const o=s.objectStore(Te),l=await o.index("fcmSenderId").get(e);if(await o.clear(),!!l){if(i===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;t={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:b(c.vapidKey)}}}else if(i===3){const c=l;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:b(c.auth),p256dh:b(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:b(c.vapidKey)}}}else if(i===4){const c=l;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:b(c.auth),p256dh:b(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:b(c.vapidKey)}}}}}})).close(),await H(K),await H("fcm_vapid_details_db"),await H("undefined"),br(t)?t:null}function br(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const yr="firebase-messaging-database",wr=1,O="firebase-messaging-store";let W=null;function Ye(){return W||(W=ee(yr,wr,{upgrade:(e,t)=>{t===0&&e.createObjectStore(O)}})),W}async function Ir(e){const t=Je(e),r=await(await Ye()).transaction(O).objectStore(O).get(t);if(r)return r;{const i=await mr(e.appConfig.senderId);if(i)return await ie(e,i),i}}async function ie(e,t){const n=Je(e),i=(await Ye()).transaction(O,"readwrite");return await i.objectStore(O).put(t,n),await i.done,t}function Je({appConfig:e}){return e.appId}const Er={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},f=new L("messaging","Messaging",Er);async function _r(e,t){const n=await se(e),r=Xe(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(ae(e.appConfig),i)).json()}catch(s){throw f.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(a.error){const s=a.error.message;throw f.create("token-subscribe-failed",{errorInfo:s})}if(!a.token)throw f.create("token-subscribe-no-token");return a.token}async function vr(e,t){const n=await se(e),r=Xe(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${ae(e.appConfig)}/${t.token}`,i)).json()}catch(s){throw f.create("token-update-failed",{errorInfo:s?.toString()})}if(a.error){const s=a.error.message;throw f.create("token-update-failed",{errorInfo:s})}if(!a.token)throw f.create("token-update-no-token");return a.token}async function Sr(e,t){const r={method:"DELETE",headers:await se(e)};try{const a=await(await fetch(`${ae(e.appConfig)}/${t}`,r)).json();if(a.error){const s=a.error.message;throw f.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw f.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}function ae({projectId:e}){return`${dr}/projects/${e}/registrations`}async function se({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Xe({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==Ge&&(i.web.applicationPubKey=r),i}const Ar=10080*60*1e3;async function Tr(e){const t=await Cr(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:b(t.getKey("auth")),p256dh:b(t.getKey("p256dh"))},r=await Ir(e.firebaseDependencies);if(r){if(Mr(r.subscriptionOptions,n))return Date.now()>=r.createTime+Ar?Dr(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Sr(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return De(e.firebaseDependencies,n)}else return De(e.firebaseDependencies,n)}async function Dr(e,t){try{const n=await vr(e.firebaseDependencies,t),r={...t,token:n,createTime:Date.now()};return await ie(e.firebaseDependencies,r),n}catch(n){throw n}}async function De(e,t){const r={token:await _r(e,t),createTime:Date.now(),subscriptionOptions:t};return await ie(e,r),r.token}async function Cr(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pr(t)})}function Mr(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&r&&i&&a}function Ce(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return Or(t,e),kr(t,e),Br(t,e),t}function Or(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const a=t.notification.icon;a&&(e.notification.icon=a)}function kr(e,t){t.data&&(e.data=t.data)}function Br(e,t){if(!t.fcmOptions&&!t.notification?.click_action)return;e.fcmOptions={};const n=t.fcmOptions?.link??t.notification?.click_action;n&&(e.fcmOptions.link=n);const r=t.fcmOptions?.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}function Rr(e){return typeof e=="object"&&!!e&&qe in e}function Nr(e){if(!e||!e.options)throw z("App Configuration Object");if(!e.name)throw z("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw z(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function z(e){return f.create("missing-app-config-values",{valueName:e})}class $r{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Nr(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function Pr(e){try{e.swRegistration=await navigator.serviceWorker.register(cr,{scope:lr}),e.swRegistration.update().catch(()=>{}),await Lr(e.swRegistration)}catch(t){throw f.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function Lr(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${Se} ms`)),Se),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=a=>{a.target?.state==="activated"&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}async function Fr(e,t){if(!t&&!e.swRegistration&&await Pr(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw f.create("invalid-sw-registration");e.swRegistration=t}}async function xr(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Ge)}async function Qe(e,t){if(!navigator)throw f.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw f.create("permission-blocked");return await xr(e,t?.vapidKey),await Fr(e,t?.serviceWorkerRegistration),Tr(e)}async function Hr(e,t,n){const r=jr(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[qe],message_name:n[fr],message_time:n[ur],message_device_time:Math.floor(Date.now()/1e3)})}function jr(e){switch(e){case M.NOTIFICATION_CLICKED:return"notification_open";case M.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Ur(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===M.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(Ce(n)):e.onMessageHandler.next(Ce(n)));const r=n.data;Rr(r)&&r[hr]==="1"&&await Hr(e,n.messageType,r)}const Me="@firebase/messaging",Oe="0.12.23";const Vr=e=>{const t=new $r(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Ur(t,n)),t},Kr=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>Qe(t,r)}};function Wr(){S(new E("messaging",Vr,"PUBLIC")),S(new E("messaging-internal",Kr,"PRIVATE")),v(Me,Oe),v(Me,Oe,"esm2020")}async function zr(){try{await P()}catch{return!1}return typeof window<"u"&&$()&&Q()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Gr(e,t){if(!navigator)throw f.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}function qr(e=je()){return zr().then(t=>{if(!t)throw f.create("unsupported-browser")},t=>{throw f.create("indexed-db-unsupported")}),te(D(e),"messaging").getImmediate()}async function Yr(e,t){return e=D(e),Qe(e,t)}function Qr(e,t){return e=D(e),Gr(e,t)}Wr();const Jr={apiKey:"AIzaSyAZB94jSl6SGarKGFELlmPP0U5AubGqlhQ",authDomain:"findy-daa52.firebaseapp.com",projectId:"findy-daa52",storageBucket:"findy-daa52.firebasestorage.app",messagingSenderId:"1098401806634",appId:"1:1098401806634:web:90436f219e6af5fa358653",measurementId:"G-D1TFQGNMV3"},Ze=He(Jr);typeof window<"u"&&ir().then(e=>e?nr(Ze):null);const ke=typeof window<"u"?qr(Ze):null;async function Xr(e){if(!ke||!("Notification"in window)||!("serviceWorker"in navigator))return;if(Notification.permission==="denied"){console.warn("Las notificaciones estÃ¡n bloqueadas.");return}if(await Notification.requestPermission()==="granted")try{const n=await navigator.serviceWorker.ready,r=await Yr(ke,{vapidKey:"BB3OKMcfMrdcyJOLFp4Bu4bX_Ne2wz5t5weXyO7wyrotGQqjxTwiavdbM_Al3Cbd4Zr7bgY1YIegVm9xDsKVj_g",serviceWorkerRegistration:n});if(!r)return;if(e===r){console.warn("Token ya sincronizado.");return}await fetch("/fcm/token",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({token:r})})}catch(n){console.error("FCM error:",n)}}function Zr(e){document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await Xr(e)})}export{Zr as i,ke as m,Qr as o,Xr as r};
