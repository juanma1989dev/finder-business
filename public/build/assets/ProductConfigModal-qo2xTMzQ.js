import{r as a,j as e}from"./vendor-core-CVn978f7.js";import{X as y}from"./vendor-icons-BvP0H4xj.js";const k=({product:r,onConfirm:h,onClose:l})=>{const[o,p]=a.useState([]),[i,x]=a.useState(null),[m,u]=a.useState(""),[b,f]=a.useState(!1),j=s=>{p(t=>t.some(n=>n.id===s.id)?t.filter(n=>n.id!==s.id):[...t,s])},g=!!r.variations?.length,c=g&&!i,d=s=>{const t=parseFloat(s);return isNaN(t)?0:t},N=d(r.price)+d(i?.price)+o.reduce((s,t)=>s+d(t.price),0);return a.useEffect(()=>{p([]),x(null),u("")},[r.id]),a.useEffect(()=>{const s=t=>{t.key==="Escape"&&l()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l]),e.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-gray-900/40 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-[420px] overflow-hidden rounded-lg bg-white shadow-2xl duration-200 animate-in fade-in zoom-in",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-purple-50 px-6 py-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase",children:"Personalizar pedidos"}),e.jsx("p",{className:"text-sm font-semibold text-purple-800",children:r.name})]}),e.jsx("button",{onClick:l,className:"rounded-lg bg-gray-50 p-2 text-gray-500 transition-colors hover:bg-purple-50 hover:text-purple-700",children:e.jsx(y,{size:18})})]}),e.jsxs("div",{className:"scrollbar-hide max-h-[60vh] space-y-4 overflow-y-auto px-6 py-4",children:[g&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"mb-3 text-[10px] font-semibold tracking-widest text-gray-700 uppercase",children:["Selecciona una opción",e.jsx("span",{className:"ml-1 text-purple-600",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.variations.map(s=>{const t=i?.id===s.id;return e.jsxs("button",{type:"button",onClick:()=>x(s),className:`flex items-center justify-between rounded-lg border-2 px-4 py-3 transition-all active:scale-95 ${t?"border-purple-600 bg-purple-50 text-purple-800":"border-purple-50 bg-white text-gray-600 hover:border-purple-100"}`,children:[e.jsx("span",{className:"text-sm font-semibold",children:s.name}),e.jsx("span",{className:"text-sm font-normal",children:Number(s.price)>0?`+ $${s.price}`:"Incluido"})]},s.id)})}),c&&e.jsx("div",{className:"mt-2 rounded-lg border border-amber-200 bg-amber-50 p-2",children:e.jsx("p",{className:"text-center text-[10px] leading-tight font-semibold text-amber-700 uppercase",children:"Selecciona una opción para continuar"})})]}),r.extras?.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"mb-3 text-[10px] font-semibold tracking-widest text-gray-700 uppercase",children:"¿Deseas agregar extras?"}),e.jsx("div",{className:"flex flex-col gap-2",children:r.extras.map(s=>{const t=o.some(n=>n.id===s.id);return e.jsxs("button",{type:"button",onClick:()=>j(s),className:`flex items-center justify-between rounded-lg border px-4 py-3 transition-all ${t?"border-purple-600 bg-purple-50 text-purple-700":"border-purple-200 bg-white text-gray-600 hover:bg-purple-50/50"}`,children:[e.jsx("span",{className:"text-sm font-normal",children:s.name}),e.jsxs("span",{className:"text-sm font-semibold",children:["+ $",s.price]})]},s.id)})})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("p",{className:"mb-1 text-[10px] font-semibold tracking-widest text-gray-700 uppercase",children:"Notas adicionales"}),e.jsx("textarea",{value:m,onChange:s=>u(s.target.value),placeholder:"Ej: Sin aderezos, cambiar por...",className:"h-20 w-full resize-none rounded-lg border border-purple-200 bg-white p-3 text-sm font-normal text-gray-600 transition-colors focus:border-purple-600 focus:outline-none"})]})]}),e.jsx("div",{className:"border-t border-purple-50 bg-white p-3",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 rounded-lg px-4 py-3 text-sm font-semibold text-gray-500 transition-all hover:bg-gray-50 active:scale-95",children:"Volver"}),e.jsxs("button",{disabled:c||b,onClick:()=>{b||(f(!0),h({extras:o,variations:i?[i]:[],notes:m}))},className:`flex-[2] rounded-lg py-3 text-sm font-semibold text-white shadow-sm transition-all active:scale-95 ${c?"cursor-not-allowed bg-gray-300":"bg-purple-600 hover:bg-purple-700"}`,children:["Confirmar — $",N.toFixed(2)]})]})})]})})};export{k as ProductConfigModal};
