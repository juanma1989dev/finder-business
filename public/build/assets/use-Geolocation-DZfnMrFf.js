import{r as o}from"./vendor-core-CVn978f7.js";const s="geo_coords",S=1200*1e3;function E(){try{const e=sessionStorage.getItem(s);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>S?(sessionStorage.removeItem(s),null):t}catch{return null}}function h(e,t){sessionStorage.setItem(s,JSON.stringify({lat:e,lng:t,timestamp:Date.now()}))}function _(e){const t=e?.enabled??!0,[g,a]=o.useState(null),[f,c]=o.useState(null),[m,n]=o.useState(!1),[C,i]=o.useState(null);return o.useEffect(()=>{if(!t)return;const r=E();if(r){a(r.lat),c(r.lng);return}if(!navigator.geolocation){i("Geolocation not supported");return}n(!0),navigator.geolocation.getCurrentPosition(u=>{const l=u.coords.latitude,d=u.coords.longitude;a(l),c(d),h(l,d),n(!1)},()=>{i("Permission denied"),n(!1)},{enableHighAccuracy:e?.enableHighAccuracy??!1})},[t]),{latitude:g,longitude:f,loading:m,error:C}}export{_ as u};
